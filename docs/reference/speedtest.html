<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run EJAM analysis for several radii and numbers of sitepoints, recording how long each step takes — speedtest • EJAM</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run EJAM analysis for several radii and numbers of sitepoints, recording how long each step takes — speedtest"><meta name="description" content="Run EJAM analysis for several radii and numbers of sitepoints, recording how long each step takes"><meta property="og:description" content="Run EJAM analysis for several radii and numbers of sitepoints, recording how long each step takes"><meta property="og:image" content="https://usepa.github.io/EJAM/logo.svg"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EJAM</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.32.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Overview for EJAM Users</h6></li>
    <li><a class="dropdown-item" href="../articles/0_whatis.html">What is EJAM</a></li>
    <li><a class="dropdown-item" href="../articles/0_webapp.html">Using EJAM</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>For analysts using R</h6></li>
    <li><a class="dropdown-item" href="../articles/1_installing.html">Installing the EJAM R package</a></li>
    <li><a class="dropdown-item" href="../articles/2_quickstart.html">Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/3_analyzing.html">Basics of Using EJAM for Analysis in RStudio</a></li>
    <li><a class="dropdown-item" href="../articles/4_advanced.html">Advanced Features</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/USEPA/EJAM/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Run EJAM analysis for several radii and numbers of sitepoints, recording how long each step takes</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/EJAM/blob/HEAD/R/utils_speedtest.R" class="external-link"><code>R/utils_speedtest.R</code></a></small>
      <div class="d-none name"><code>speedtest.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Run EJAM analysis for several radii and numbers of sitepoints, recording how long each step takes</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">speedtest</span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  sitepoints <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  weighting <span class="op">=</span> <span class="st">"frs"</span>,</span>
<span>  radii <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3.106856</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">31.06856</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>  avoidorphans <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  test_ejamit <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  test_getblocksnearby <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  test_doaggregate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  test_batch.summarize <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  logging <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  logfolder <span class="op">=</span> <span class="st">"."</span>,</span>
<span>  logfilename <span class="op">=</span> <span class="st">"log_n_datetime.txt"</span>,</span>
<span>  honk_when_ready <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  saveoutput <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  getblocks_diagnostics_shown <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>optional, vector of 1 or more counts of how many random points to test, or
set to 0 to interactively pick file of points in RStudio (n is ignored if sitepoints provided)</p></dd>


<dt id="arg-sitepoints">sitepoints<a class="anchor" aria-label="anchor" href="#arg-sitepoints"></a></dt>
<dd><p>optional,  (use if you do not want random points) data.frame of points or
path/file with points, where columns are lat and lon in decimal degrees</p></dd>


<dt id="arg-weighting">weighting<a class="anchor" aria-label="anchor" href="#arg-weighting"></a></dt>
<dd><p>optional, if using random points, how to weight them,
such as facilities, people, or blockgroups. see <code><a href="testpoints_n.html">testpoints_n()</a></code></p></dd>


<dt id="arg-radii">radii<a class="anchor" aria-label="anchor" href="#arg-radii"></a></dt>
<dd><p>optional, one or more radius values in miles
to use in creating circular buffers when findings residents nearby each of sitepoints.
The default list includes one that is 5km (approx 3.1 miles)</p></dd>


<dt id="arg-avoidorphans">avoidorphans<a class="anchor" aria-label="anchor" href="#arg-avoidorphans"></a></dt>
<dd><p>see <code><a href="getblocksnearby.html">getblocksnearby()</a></code> or <code><a href="ejamit.html">ejamit()</a></code> regarding this param</p></dd>


<dt id="arg-test-ejamit">test_ejamit<a class="anchor" aria-label="anchor" href="#arg-test-ejamit"></a></dt>
<dd><p>whether to test only ejamit()
instead of its subcomponents like getblocksnearby(), doaggregate(), etc</p></dd>


<dt id="arg-test-getblocksnearby">test_getblocksnearby<a class="anchor" aria-label="anchor" href="#arg-test-getblocksnearby"></a></dt>
<dd><p>whether to include this function in timing - not used because always done</p></dd>


<dt id="arg-test-doaggregate">test_doaggregate<a class="anchor" aria-label="anchor" href="#arg-test-doaggregate"></a></dt>
<dd><p>whether to include this function in timing</p></dd>


<dt id="arg-test-batch-summarize">test_batch.summarize<a class="anchor" aria-label="anchor" href="#arg-test-batch-summarize"></a></dt>
<dd><p>whether to include this function in timing</p></dd>


<dt id="arg-logging">logging<a class="anchor" aria-label="anchor" href="#arg-logging"></a></dt>
<dd><p>logical optional, whether to save log file with timings of steps.
NOTE this slows it down though.</p></dd>


<dt id="arg-logfolder">logfolder<a class="anchor" aria-label="anchor" href="#arg-logfolder"></a></dt>
<dd><p>optional, name of folder for log file</p></dd>


<dt id="arg-logfilename">logfilename<a class="anchor" aria-label="anchor" href="#arg-logfilename"></a></dt>
<dd><p>optional, name of log file to go in folder</p></dd>


<dt id="arg-honk-when-ready">honk_when_ready<a class="anchor" aria-label="anchor" href="#arg-honk-when-ready"></a></dt>
<dd><p>optional, self-explanatory</p></dd>


<dt id="arg-saveoutput">saveoutput<a class="anchor" aria-label="anchor" href="#arg-saveoutput"></a></dt>
<dd><p>but this slows it down if set to TRUE to save each run as .rda file</p></dd>


<dt id="arg-plot">plot<a class="anchor" aria-label="anchor" href="#arg-plot"></a></dt>
<dd><p>whether to create plot of results</p></dd>


<dt id="arg-getblocks-diagnostics-shown">getblocks_diagnostics_shown<a class="anchor" aria-label="anchor" href="#arg-getblocks-diagnostics-shown"></a></dt>
<dd><p>set TRUE to see more details on block counts etc.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>passed to plotting function</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>EJAM results similar to as from the web app or <code><a href="ejamit.html">ejamit()</a></code> and also creates a plot</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This is essentially a test script that times each step of EJAM for a large dataset</p><ul><li><p>pick a sample size (n) (or enter sitepoints, or set n=0 to interactively pick file of points in RStudio)</p></li>
<li><p>pick n random points</p></li>
<li><p>pick a few different radii for circular buffering</p></li>
<li><p>analyze indicators in circular buffers and overall (find blocks nearby and then calc indicators)</p></li>
<li><p>get stats that summarize those indicators</p></li>
<li><p>compare times between steps and radii and other approaches or tools</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="speedtest_plot.html">speedtest_plot()</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{ </span></span>
<span>  <span class="va">speedseen_few</span> <span class="op">&lt;-</span> <span class="fu">speedtest</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>,<span class="fl">500</span><span class="op">)</span>, radii<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3.106856</span><span class="op">)</span>, logging<span class="op">=</span><span class="cn">FALSE</span>, honk<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">speedseen_nearer_to1k</span> <span class="op">&lt;-</span> <span class="fu">speedtest</span><span class="op">(</span>n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1e2</span>,<span class="fl">1e3</span>,<span class="fl">1e4</span> <span class="op">)</span>, radii<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3.106856</span>,<span class="fl">5</span> <span class="op">)</span>,</span>
<span>    logging<span class="op">=</span><span class="cn">TRUE</span>, honk<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save</a></span><span class="op">(</span> <span class="va">speedseen_nearer_to1k</span>, file <span class="op">=</span> <span class="st">"~/../Downloads/speedseen_nearer_to1k.rda"</span><span class="op">)</span></span>
<span>  <span class="fu">rstudioapi</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/rstudioapi/reference/savePlotAsImage.html" class="external-link">savePlotAsImage</a></span><span class="op">(</span>        <span class="st">"~/../Downloads/speedseen_nearer_to1k.png"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">speedseen_all</span> <span class="op">&lt;-</span> <span class="fu">speedtest</span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1e2</span>,<span class="fl">1e3</span>,<span class="fl">1e4</span><span class="op">)</span>, </span>
<span>    radii<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3.106856</span>, <span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">31.06856</span><span class="op">)</span>, </span>
<span>    logging<span class="op">=</span><span class="cn">TRUE</span>, honk<span class="op">=</span><span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span> <span class="op">}</span> <span class="co"># }</span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>US EPA 2024</p>
</div>

<div class="pkgdown-footer-right">
  <p>EJAM Version 2.32.0</p>
</div>

    </footer></div>





  </body></html>

